




<!DOCTYPE html>
<html lang="zh">
    <style>
        @font-face {
            font-family: 'icomoon';
            src: url('/en/fonts/icomoon.eot?zb38vt');
            src: url('/en/fonts/icomoon.eot?zb38vt#iefix') format('embedded-opentype'),
                 url('/en/fonts/icomoon.ttf?zb38vt') format('truetype'),
                 url('/en/fonts/icomoon.woff?zb38vt') format('woff'),
                 url('/en/fonts/icomoon.svg?zb38vt#icomoon') format('svg');
            font-weight: normal;
            font-style: normal;
            font-display: block;
          }
    </style><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">

<meta name="keywords" content="[Kubernetes, KubeSphere, Installation, Preparation, Persistent Storage, Network File System, NeonSAN CSI]">



<meta name="description" content="Learn how to configure NeonSAN CSI for the KubeSphere cluster in a production environment.">

<link rel="icon" href="/en/images/favicon.ico" type="image/x-icon">

<title>Configure NeonSAN CSI - KubeSphere Enterprise</title>
<link href="/en/css/theme.css" rel="stylesheet">
<link href="/en/css/bulma.css" rel="stylesheet">
<link href="/en/css/bulma-tooltip.min.css" rel="stylesheet">
<link href="/en/css/atom-one-light.css" rel="stylesheet" />
<link href="/en/css/magnific-popup.css" rel="stylesheet" />


<link href="/en/scss/main.min.56d66c39133dd11211ab0ba0a1e1290f5815d8e5ea2b67ca9a2fdabd2a1c2a9b.css" rel="stylesheet" integrity="sha256-VtZsORM90RIRqwugoeEpD1gV2OXqK2fKmi/avSocKps=">


<script src="/en/js/jquery-2.2.4.js"></script>
<body
        class="root   "
        style=""
        ><header>
  <nav class="navbar">
    
      <a href="/en" class="navbar-logo-wrapper">
        <img class="navbar-logo" src="/en/images/qingcloud-logo.svg" />
        <div class="navbar-split navbar-left-split">|</div>
        <div class="navbar-logo-text">KubeSphere Enterprise</div>
      </a>
    
    <div class="navbar-nav">
      
        <div
          class="navbar-nav-item navbar-nav-version ">
          
          <div class="dropdown-trigger">
            <span class="project-version">
              v4.2.0
            </span>
            
          </div>
          
        </div>
      
    </div>
    <div class="search navbar-search">
      <div class="control has-icons-left has-icons-right docs-search-input">
        <span class="icon is-left">
          <img src="/en/images/icons/magnifier_duotone.svg" />
        </span>
        <input
          class="input"
          name="q"
          type="input"
          placeholder="请输入关键字快速获取帮助"
          autocomplete="off"
        />
        <span class="icon is-right"> </span>
      </div>
      <img class="clear-search-input" src="/en/images/icons/close_duotone.svg" />
    </div>
    
      
      
        
          <a class="navbar-item-right btn primary-btn navbar-btn "
            target="_blank"
            data-url="https://docs.kubesphere.com.cn/"
            data-text="中文文档"
            href="https://docs.kubesphere.com.cn/">
            中文文档
          </a>
        
      
    
  </nav>
</header><script id="search-result-total-template" type="text/x-js-template">
  <div class="search-result-total">
    共为您找到 ${count} 个结果
  </div>
</script>

<script id="search-result-item-template" type="text/x-js-template">
  <div class="search-result-content-item">
    <div class="search-result-content-item-title">
      <a href="${href}">${title}</a>
    </div>
    <div class="search-result-content-item-content">
      ${content}
    </div>
    <div class="search-result-content-item-ref">
      <ul class="content-breadcrumb">
      </ul>
    </div>
  </div>
</div>
</script>

<script id="search-breadcrumb-template" type="text/x-js-template">
  <li class="icon-slash_fill">
    <a href="${href}">${title}</a>
  </li>
</script>

<script id="search-result-total-template" type="text/x-js-template">
  <div class="search-result-total">
    共为您找到 ${count} 个结果
  </div>
</script>
<script id="search-result-page-template" type="text/x-js-template">
  <nav class="search-result-pagination pagination is-centered">
    <a class="pagination-previous icon-chevron_left_fill"></a>
    <a class="pagination-next icon-chevron_right_fill"></a>
    <ul class="pagination-list">
    </ul>
  </nav>
</script>
<div class="container">

  


  
    
  


<aside class="sidebar-wrapper">
  <div class="sidebar-drag"></div>
  <div class="sidebar">
    
      <div class="sidebar-title" >
        <a href="/en/v4.2.0/">
          
            KubeSphere Enterprise
        </a>
        
      </div>
      
    
    <nav class="sidebar-menu" id="sidebar-menu-scroll-container">
      
        
        <ul>
  
  
    
      
      
      
      
        
          <li
            class="sidebar-item active ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/" >Installation Guide</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_up_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
        
          <li
            class="sidebar-item active ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/" >Preparation</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_up_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/01-supported-k8s/">Environment Requirements</a>
          </li>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a  >Configure High Availability</a>
            
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/02-configure-high-availability/02-configure-k8s-high-availability/">Configure Kubernetes High Availability</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item active ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/" >Configure External Persistent Storage</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_up_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/01-configure-storage-devices-on-cloud/">Configure Cloud Storage Devices</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/04-configure-neosan-csi/">Configure NeonSAN CSI</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/05-configure-nfs/">Configure NFS</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/07-configure-opensource-storage/">Configure Open Source Storage Systems</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/02-install-kubesphere/" >Install KubeSphere Enterprise</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/02-install-kubesphere/01-online-install-kubernetes-and-kubesphere/">Online Installation of Kubernetes and KubeSphere Enterprise</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/02-install-kubesphere/03-activate-kse/">Activate KubeSphere Enterprise</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/02-install-kubesphere/04-configure-ks-high-availability/">Configure KubeSphere High Availability</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/02-install-kubesphere/05-appendix/">Appendix: Advanced Configuration of KubeSphere Core</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/03-upgrade-kubesphere/" >Upgrade KubeSphere Enterprise</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/03-upgrade-kubesphere/03-online-upgrade-kubephere-from-4.1.x/">Online Upgrade from v4.1.x to v4.2.0</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/03-upgrade-kubesphere/04-upgrade-kubephere-from-v4.1/">Offline Upgrade from v4.1.x to v4.2.0</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/03-upgrade-kubesphere/05-appendix-ks-core/">Appendix 1: ks-core Helm Chart Upgrade Parameters</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/04-uninstall-kubesphere/" >Uninstall KubeSphere Enterprise</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/04-uninstall-kubesphere/01-uninstall-kubesphere-only/">Uninstall KubeSphere Enterprise Only</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/04-uninstall-kubesphere/02-uninstall-kubernetes-and-kubesphere/">Uninstall Kubernetes and KubeSphere Enterprise</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
    
      
      
      
      
        
          <li
            class="sidebar-item collapsed ">
            <a href="/en/v4.2.0/03-installation-and-upgrade/05-add-and-delete-cluster-nodes/" >Add and Remove Cluster Nodes</a>
            
            
              
                
                  
                
              
            
              
                
                  
                
              
            
            
              <span
                class="menu-switch-icon icon-caret_down_fill">
              </span>
            
          </li>
          
          <ul>
  
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/05-add-and-delete-cluster-nodes/01-add-cluster-nodes/">Add Cluster Nodes</a>
          </li>
        
      
    
  
    
      
      
      
      
          <li class="sidebar-item">
            <a href="/en/v4.2.0/03-installation-and-upgrade/05-add-and-delete-cluster-nodes/02-delete-cluster-nodes/">Remove Cluster Nodes</a>
          </li>
        
      
    
  
</ul>
        
      
    
  
</ul>
        
      
    
  
    
  
</ul>
      
    </nav>

  </div>
</aside>
<div class="content-card-wrapper">
  <div class="content-card">
    <div class="content-wrapper"><ul class="content-breadcrumb">
      <li class="icon-slash_fill"><a href="/en/v4.2.0" data-url="/en/v4.2.0">KubeSphere Enterprise</a></li>
      <li class="icon-slash_fill"><a href="/en/v4.2.0/03-installation-and-upgrade" data-url="/en/v4.2.0/03-installation-and-upgrade">Installation Guide</a></li>
      <li class="icon-slash_fill"><a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations" data-url="/en/v4.2.0/03-installation-and-upgrade/01-preparations">Preparation</a></li>
      <li class="icon-slash_fill"><a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage" data-url="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage">Configure External Persistent Storage</a></li>
      <li class="icon-slash_fill"><a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/04-configure-neosan-csi" data-url="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/04-configure-neosan-csi">Configure NeonSAN CSI</a></li></ul><div class="post-wrapper"><div class="post">
  <h1 class="post-title">
    Configure NeonSAN CSI</h1>
  <div class="post-info">
    <div class="post-date">
      Time updated：2025-08-28 08:29:09
    </div>
    
    
    
    
    
    
      
    
    
  </div><div class="post-menu">
  <div class="post-menu-title">Page Catalog</div>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#_prerequisites">Prerequisites</a></li>
    <li><a href="#_steps">Steps</a>
      <ul>
        <li><a href="#_online_installation_of_neonsan_csi">Online Installation of NeonSAN CSI</a></li>
        <li><a href="#_offline_installation_of_neonsan_csi">Offline Installation of NeonSAN CSI</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div><div class="post-content">
    
      
      
<div class="paragraph">
<p>NeonSAN is an enterprise-grade distributed block storage system developed by QingCloud. NeonSAN CSI is a storage plugin provided by the NeonSAN team for Kubernetes, which enables dynamic provisioning of persistent storage volumes on the Kubernetes platform.</p>
</div>
<div class="paragraph">
<p>This section explains how to configure NeonSAN CSI for KubeSphere
clusters in a production environment.</p>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>NeonSAN v2.2.0 or above has been successfully deployed, and each node in the container cluster is connected to NeonSAN by the installed QBD. For specific operations, please consult KubeSphere technical support.</p>
</li>
<li>
<p>Kubernetes v1.16 or above has been installed.</p>
</li>
<li>
<p>Helm has been installed on the master node of the container cluster. Helm 3 is used as an example in this section.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps">Steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_online_installation_of_neonsan_csi">Online Installation of NeonSAN CSI</h3>
<div class="paragraph">
<p>Online installation is applicable to container cluster that has access to the Internet.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute the following command to add the Helm repository, such as <a href="https://charts.kubesphere.io/test" class="bare">https://charts.kubesphere.io/test</a>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm repo add ks-test https://charts.kubesphere.io/test
&#34;ks-test&#34; has been added to your repositories</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to check if the repository has been added successfully.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm repo list
NAME        URL
ks-test     https://charts.kubesphere.io/test</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to update the repository’s chart list.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm repo update</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to search for the installation package of NeonSAN CSI in the repository.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm search repo neonsan
NAME                  CHART VERSION   APP VERSION DESCRIPTION
ks-test/csi-neonsan   1.2.2           1.2.0       A Helm chart for NeonSAN CSI Driver</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Check the version of qbd installed on the master node.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ qbd -v
Package Version:       2.2.0-336092c-202202101432-ubuntu2004
Loaded Module Version: 2.2.0-336092c-202209010306-testlangchaor01n01
NeonSAN Static Library Version: 3.0.0-092498bf
NeonSAN Protocol Version: 1</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to install NeonSAN CSI. Set the parameter <strong>driver.repository</strong> based on the qbd version installed on the master node. For example, if the qbd version is 2.2.0, the parameter in the command should be <strong>driver.repository=&#34;csiplugin/csi-neonsan-qbd2.2.0&#34;</strong>.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm install csi-neonsan ks-test/csi-neonsan --namespace kube-system --set driver.tag=&#34;v1.2.3&#34; --set sc.rep_count=2 --set driver.repository=&#34;csiplugin/csi-neonsan-qbd2.2.0&#34;
NAME: csi-neonsan
LAST DEPLOYED: Fri Nov 20 10:28:32 2020
NAMESPACE: kube-system
STATUS: deployed
REVISION: 1
TEST SUITE: None</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to check if NeonSAN CSI is installed successfully.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm list -n kube-system
NAME                         	NAMESPACE   	REVISION   	UPDATED                          	STATUS     	CHART                          	APP VERSION
csi-neonsan                  	kube-system 	1          	2020-11-20 10:28:32.240990384 +0800 CST deployed   	csi-neonsan-1.2.2              	1.2.0</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Check if the pod is in Running state.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl get pod -n kube-system | grep csi-neonsan
   kube-system                csi-neonsan-controller-75dc5cbcff-6gk54                5/5     Running     0          38s
   kube-system                csi-neonsan-node-8vd8l                                 2/2     Running     0          38s
   kube-system                csi-neonsan-node-dxk2z                                 2/2     Running     0          38s
   kube-system                csi-neonsan-node-mp2b2                                 2/2     Running     0          38s</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Check if all NeonSAN CSI components are running normally.</p>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>When <strong>READY</strong> equals <strong>AVAILABLE</strong>, the csi-neonsan-controller is normal.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl -n kube-system get deployments.apps  csi-neonsan-controller
NAME                     READY   UP-TO-DATE   AVAILABLE   AGE
csi-neonsan-controller   1/1     1            1           66m</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>When <strong>DESIRED</strong> equals <strong>READY</strong> and <strong>AVAILABLE</strong>, the csi-neonsan-node is normal.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl -n kube-system get daemonsets.apps csi-neonsan-node
NAME               DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
      csi-neonsan-node   3         3         3       3            3           &lt;none&gt;         66m</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Check if the storage class is installed.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl get storageclass
NAME              PROVISIONER                            RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE
csi-neonsan       neonsan.csi.qingstor.com               Delete          Immediate              true                   2m56s</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>View the storage pool used by the storage class. This storage pool must exist in NeonSAN, otherwise you cannot create storage volumes using this storage class.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ kubectl get storageclass csi-neonsan -o yaml | grep pool_name
pool_name: kube</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Log in to the NeonSAN server and check if the storage pool used by the storage class exists. If not, create the storage pool using the <strong>neonsan create_pool</strong> command.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ neonsan list_pool -pool kube -detail
Pool Count:  1
+----------+------+---------------------------+
|    ID    | NAME |       CREATED TIME        |
+----------+------+---------------------------+
| 33554432 | kube | 2020-08-07T14:53:52+08:00 |
+----------+------+---------------------------+</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_offline_installation_of_neonsan_csi">Offline Installation of NeonSAN CSI</h3>
<div class="paragraph">
<p>Offline installation is applicable to container clusters that cannot access the Internet.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On your local machine, download the NeonSAN CSI installation package and copy the package to the cluster Master node.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm repo add ks-test https://charts.kubesphere.io/test
&#34;ks-test&#34; has been added to your repositories
$ helm pull ks-test/csi-neonsan
$ ls -l csi-neonsan*.tgz
-rw-r--r--. 1 root root 5196 Nov 20 13:13 csi-neonsan-1.2.2.tgz</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following command to view all image files required by NeonSAN CSI.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ helm show values ks-test/csi-neonsan
driver:
  repository: csiplugin/csi-neonsan
  tag: v1.2.0
  node:
    repository: csiplugin/csi-neonsan-ubuntu
    tag: v1.2.0
provisioner:
  repository: csiplugin/csi-provisioner
  tag: v1.5.0
  volumeNamePrefix: pvc
attacher:
  repository: csiplugin/csi-attacher
  tag: v2.1.1
resizer:
  repository: csiplugin/csi-resizer
  tag: v0.4.0
snapshotter:
  repository: csiplugin/csi-snapshotter
  tag: v2.0.1
registrar:
  repository: csiplugin/csi-node-driver-registrar
  tag: v1.2.0</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Use Docker to download all images locally and package them, or upload them to an internal repository (such as harbor).</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker pull csiplugin/csi-neonsan:v1.2.0
docker pull csiplugin/csi-neonsan-ubuntu:v1.2.0
docker pull csiplugin/csi-provisioner:v1.5.0
docker pull csiplugin/csi-attacher:v2.1.1
docker pull csiplugin/csi-resizer:v0.4.0
docker pull csiplugin/csi-snapshotter:v2.0.1
docker pull csiplugin/csi-node-driver-registrar:v1.2.0</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker save csiplugin/csi-neonsan:v1.2.0 \
  csiplugin/csi-neonsan-ubuntu:v1.2.0 \
  csiplugin/csi-provisioner:v1.5.0 \
  csiplugin/csi-attacher:v2.1.1 \
  csiplugin/csi-resizer:v0.4.0 \
  csiplugin/csi-snapshotter:v2.0.1 \
  csiplugin/csi-node-driver-registrar:v1.2.0 \
  -o neonsan-csi-images.tar</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following commands to upload the image package to a directory on all nodes in the cluster, such as the <strong>/tmp</strong> directory, extract it, and install it.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ scp neonsan-csi-images.tar user@node1:/tmp/
scp neonsan-csi-images.tar user@node2:/tmp/
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ tar -xvf /tmp/neonsan-csi-images.tar -C /</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Execute the following commands to check if the installation is complete. If you see all the NeonSAN CSI images in the list, the installation is successful.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ docker images</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Refer to the steps 8 - 12 of <a href="/en/v4.2.0/03-installation-and-upgrade/01-preparations/04-configure-external-persistent-storage/#_online_installation_of_neonsan_csi">online installation</a> for post-installation checks.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>After successfully installing NeonSAN CSI, you can view it in the <strong>Storage</strong> section on the KubeSphere web console.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>

    

  </div>
  <div class="post-footer">
    <div class="post-prev">
    </div>
    <div class="post-next">
    </div>
  </div>
  <div class="post-back-to-top">
    <span class="icon-up_3_fill"></span>
  </div>
</div>
<div class="post-placeholder"><div class="post-menu">
  <div class="post-menu-title">Page Catalog</div>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#_prerequisites">Prerequisites</a></li>
    <li><a href="#_steps">Steps</a>
      <ul>
        <li><a href="#_online_installation_of_neonsan_csi">Online Installation of NeonSAN CSI</a></li>
        <li><a href="#_offline_installation_of_neonsan_csi">Offline Installation of NeonSAN CSI</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div></div>
      </div>
    </div>
  </div>
</div></div>
    </body><script src="/en/js/bootstrap.min.js"></script>
<script src="/en/js/autocomplete/jquery.autocomplete.js"></script>
<script src="/en/js/copy-to-clipboard.js"></script>
<script src="/en/js/highlight.min.js"></script>
<script src="/en/js/jquery.tmpl.min.js"></script>
<script src="/en/js/jquery.magnific-popup.min.js"></script>
<script src="/en/js/search/jquery.mark.min.js"></script>
<script>
  window.HUGO_BASEURL = "\/en";
  window.HUGO_I18N = "{\"applicable_scope\":\"Applicable scope\",\"next\":\"Next\",\"page_catalog\":\"Page Catalog\",\"path\":\"Path\",\"previous\":\"Previous\",\"search_empty\":\"No results found. Please try other keywords.\",\"search_placeholder\":\"Enter keywords for help\",\"study_section\":\"Study Section\",\"update_time\":\"Time updated\",\"view_docs\":\"View docs\"}";
</script>

<script type="text/javascript" src="/en/js/common.fabd21a53168b1eeeb5a5eea37f666342dfe616b67039ea0fe08d0c4ef5390f3423d28b9658e1d491ee6875867d02592c61c2b77975619099214156dcd3e1bc3.js" integrity="sha512-&#43;r0hpTFose7rWl7qN/ZmNC3&#43;YWtnA56g/gjQxO9TkPNCPSi5ZY4dSR7mh1hn0CWSxhwrd5dWGQmSFBVtzT4bww=="></script>


<script type="text/javascript" src="/en/js/client-search/dist/index.43039aa05afec4f5e41ea7babc881477ec1e8f36380984c0f50dca64a37ee0bc5ab775bc65efdf8a77cdfac99eee1264a69a7b4d4b009e05224cca8ed81cf039.js"  integrity="sha512-QwOaoFr&#43;xPXkHqe6vIgUd&#43;wejzY4CYTA9Q3KZKN&#43;4Lxat3W8Ze/finfN&#43;sme7hJkppp7TUsAngUiTMqO2BzwOQ=="></script>

<script>
  $(function() {
    
    hljs.highlightAll();
    
    $.each($('.post-content .imageblock img'), function () {
      $(this).attr('data-mfp-src', $(this).attr('src'));
    });
    $('.post-content').magnificPopup({
      disableOn: function () {
        if ($(window).width() < 600) {
          return false;
        }
        return true;
      },
      delegate: '.imageblock img',
      type: 'image',
      gallery: {
        enabled: true,
      },
    });
  });
</script>
</html>
